# iOS template project
A template iOS project that is generated by [chigevara tool](https://github.com/ChiliLabs/chigevara).

## Structure
The template project already contains a base file structure for a new project, no need to make it from scratch anymore.

<img src="https://chililabs.io/chigevara/images/project_file_structure.jpg" width="219" height="443" />

## List of tools and libraries
- SwiftLint
- RxSwift, RxCocoa, RxAlamofire, RxFlow, RxAppState, RxKeyboard
- Localize-Swift
- MagazineLayout
- SnapKit
- CHICore, CHIUIComponents, CHIRxUtils

# Layout

## Design system-driven approach
MagazineLayout is used as the primary layout approach for the whole app. Cells configurators added to the project for a more convenient development flow.

### MagazineLayoutSection
MagazineLayoutSection structure is responsible for structuring data on the screen.
```
let header: HeaderInfo
let footer: FooterInfo
let items: [CellConfigurator]
let background: BackgroundInfo
let sectionInset: UIEdgeInsets
let itemsInset: UIEdgeInsets
```
### BaseMagazineLayoutVC
The base viewcontroller that initializes a collection view, binds sections onto MagazineLayout, and provides interface for data bindings. This viewcontroller should be inherited by all screens in the app.

### View models for cells
Each cell should have its view model and should conform to `MagazineCellDataType`. When the cell gets selected, didSelect() method is called in a viewmovel and can be used to produce a next step or something else.

### CollectionViewCellsRegistrator
You don't need to register cells in collectionview. It will happen automatically by `CollectionViewCellsRegistrator`.

### Screen view controller
Works with `SectionedViewModel` can be used to display a simple page. 

## FormScreen view controller
This view controller can be inherited to implement any kind of data input form.

<img src="http://chililabs.io/chigevara/images/form_example.gif" width="244" height="480" />

**Main benefits:**
- Can be positioned in the middle of the screen or sticked to the top.
- Automatically scrolls to visible area.
- Implements a toolbar with next, previous and done buttons.
- Supports device rotation

### Next/prev buttons support
To be able to support next/prev buttons:
1. Conform your vc's view model to `FormScreenViewModel`
2. Each cell that can become first responder should conform to `FocusableCell`, and override `canBecomeFirstResponder` and `becomeFirstResponder()`
```
override var canBecomeFirstResponder: Bool {
    return true
}

override func becomeFirstResponder() -> Bool {
    self.field.becomeFirstResponder()
}

var hasAccessoryView: Bool {
    return self.field.inputAccessoryView != nil
}

func setAccessory(view: UIView) {
    return self.field.inputAccessoryView = view
}
```
